version: "3.4"
services:
    tedicross:
        image: tsunderechen/tedicross-docker
        deploy:
            replicas: 1
            restart_policy:
                condition: on-failure
        working_dir: /app
        command: "cp /run/secrets/tedicross-settings.yaml /app/settings.yaml && npm start"
        secrets:
            - tedicross-settings.yaml
secrets:
    tedicross-settings.yaml:
        external: true
